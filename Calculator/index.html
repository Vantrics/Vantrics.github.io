<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="img/icon.png">
    <link rel="shortcut icon" type="image/png" href="img/icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <title>計算機</title>
    <style>
        html {
            height: 100%;
        }

        body {
            height: 100%;
            background-color: rgb(0, 0, 0);
            background-image: url("https://picsum.photos/1200/900/?random=1");
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
        }

        .container-md {
            background-color: rgba(0, 0, 0, 0.5);
            max-width: 414px !important;
            height: 100% !important;
        }

        .row {
            vertical-align: text-bottom;
            max-width: 414px !important;
        }

        .input_result {
            color: white;
            font-size: 50px;
            text-align: right;
            overflow: hidden;
            margin-bottom: 0px;
        }

        .history {
            color: limegreen;
            font-size: 24px;
            text-align: right;
            overflow: hidden;
        }

        button {
            opacity: 0.85;
            text-align: center;
        }

        .btn {
            margin: 7px 0px;
            font-size: 28px;
            width: 80px;
            height: 80px;
            text-align: center;
            padding: 0 0;
        }

        .form-control {
            background-color: black;
            color: white;
        }

        .col-3 {
            padding: 0 0;
        }
    </style>
</head>

<body>
    <div class="container-md d-flex align-content-center flex-wrap">
        <div class="row">
            <div class="col-12">
                <p class="input_result">0</p>
                <p class="history">0</p>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-light rounded-circle align-items-center AC_btn">AC</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-light rounded-circle align-items-center backspace_btn">⌫</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-light rounded-circle align-items-center sqrt_btn">√</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-success rounded-circle align-items-center division_btn">÷</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">7</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">8</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">9</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-success rounded-circle align-items-center times_btn">×</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">4</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">5</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">6</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-success rounded-circle align-items-center minus_btn">-</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">1</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">2</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">3</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-success rounded-circle align-items-center plus_btn">+</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center decimal_btn">.</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center num_btn">0</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-dark rounded-circle align-items-center neg_btn">+/-</button>
            </div>
            <div class="col-3 d-flex justify-content-center">
                <button type="button" class="btn btn-success rounded-circle align-items-center is_btn">=</button>
            </div>
        </div>
    </div>
    <script>
        let h3 = document.querySelector("h3.tipDisplay");
        let input = document.querySelector("p.input_result");
        let history = document.querySelector("p.history");

        let Operator = '';
        let numFirst = 0;
        let numSecond = 0;
        let multi = 0;
        
        const ACBtn = document.querySelector('.AC_btn');

        document.querySelector('.plus_btn').addEventListener("click", function (event) {
            if (Operator == '+') {
                multi++;
                numSecond = input.innerText;
                input.innerText = Number(numFirst) + Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
            } else {
                numFirst = input.innerText;
                input.innerText = 0;
                Operator = '+';
                history.innerText = '';
                history.innerText += `${numFirst}${Operator}`;
            }
        });

        document.querySelector('.minus_btn').addEventListener("click", function (event) {
            if (Operator == '-') {
                multi++;
                numSecond = input.innerText;
                input.innerText = Number(numFirst) - Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
            } else {
                numFirst = input.innerText;
                input.innerText = 0;
                Operator = '-';
                history.innerText = `${numFirst}${Operator}`;
            }
        });

        document.querySelector('.times_btn').addEventListener("click", function (event) {
            if (Operator == '×') {
                multi++;
                numSecond = input.innerText;
                input.innerText = Number(numFirst) * Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
            } else {
                numFirst = input.innerText;
                input.innerText = 0;
                Operator = '×';
                history.innerText = `${numFirst}${Operator}`;
            }
        });

        document.querySelector('.division_btn').addEventListener("click", function (event) {
            if (Operator == '÷') {
                multi++;
                numSecond = input.innerText;
                input.innerText = Number(numFirst) / Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
            } else {
                numFirst = input.innerText;
                input.innerText = 0;
                Operator = '÷';
                history.innerText = `${numFirst}${Operator}`;
            }
        });

        document.querySelector('.is_btn').addEventListener("click", function (event) {
            numSecond = input.innerText;
            if (Operator == '+') {
                input.innerText = Number(numFirst) + Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
                Operator = '';
                numFirst = 0;
            }
            if (Operator == '-') {
                input.innerText = Number(numFirst) - Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
                Operator = '';
                numFirst = 0;
            }
            if (Operator == '×') {
                input.innerText = Number(numFirst) * Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
                Operator = '';
                numFirst = 0;
            }
            if (Operator == '÷') {
                input.innerText = Number(numFirst) / Number(numSecond);
                history.innerText = `${numFirst}${Operator}${numSecond}`;
                Operator = '';
                numFirst = 0;
            }
        });


        ACBtn.addEventListener("click", function (event) {
            if (ACBtn.innerText != `AC`) {
                input.innerText = 0;
                ACBtn.innerText = 'AC';
            } else {
                input.innerText = 0;
                history.innerText = 0;
                numFirst = 0;
                numSecond = 0;
                Operator = '';
                multi = 0;
            }
        });

        document.querySelector('.backspace_btn').addEventListener("click", function (event) {

            if (input.innerText == '') {
                input.innerText = 0;
            } else if (input.innerText.length <= 1) {
                input.innerText = 0;
            } else {
                input.innerText = input.innerText.slice(0, input.innerText.length - 1);
            }
        });
        document.querySelector('.sqrt_btn').addEventListener('click', function () {
            history.innerText = `sqrt(${input.innerText})`;
            input.innerText = Math.sqrt(input.innerText);
        });

        document.querySelector('.decimal_btn').addEventListener('click', function () {
            if (!input.innerText.includes('.'))
                input.innerText += '.';
        });

        document.querySelector('.neg_btn').addEventListener('click', function () {
            history.innerText = `${input.innerText}×-1`;
            input.innerText = input.innerText * -1;
        });

        document.querySelectorAll(".num_btn").forEach((x) => {
            x.addEventListener("click", () => {
                if (multi >= 1) {
                    ACBtn.innerText = 'C';
                    numFirst = input.innerText;
                    input.innerText = 0;
                    multi = 0;
                }
                if (input.innerText == 'NaN') {
                    input.innerText = 0;
                }
                if (input.innerText == '0') {
                    ACBtn.innerText = 'C';
                    input.innerText = '';
                    input.innerText = x.innerText;
                } else {
                    ACBtn.innerText = 'C';
                    input.innerText += x.innerText;
                }
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
</body>

</html>